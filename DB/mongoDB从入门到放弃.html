<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MongoDB从入门到放弃 | gblw</title>
    <meta name="description" content="一个前端小学生">
    <link rel="icon" href="/favicon.ico">
  <link rel="manifest" href="/manifest.json">
    
    <link rel="preload" href="/assets/css/0.styles.ac99ad03.css" as="style"><link rel="preload" href="/assets/js/app.2e26f941.js" as="script"><link rel="preload" href="/assets/js/10.f5aa46b0.js" as="script"><link rel="prefetch" href="/assets/js/1.9abbfca6.js"><link rel="prefetch" href="/assets/js/11.8d9fc089.js"><link rel="prefetch" href="/assets/js/12.da5d20a5.js"><link rel="prefetch" href="/assets/js/13.7ccc43bd.js"><link rel="prefetch" href="/assets/js/14.936637cc.js"><link rel="prefetch" href="/assets/js/15.35e22122.js"><link rel="prefetch" href="/assets/js/16.287d904c.js"><link rel="prefetch" href="/assets/js/17.7040011b.js"><link rel="prefetch" href="/assets/js/18.7659f702.js"><link rel="prefetch" href="/assets/js/19.9e094f67.js"><link rel="prefetch" href="/assets/js/20.1a01400b.js"><link rel="prefetch" href="/assets/js/21.a8d12454.js"><link rel="prefetch" href="/assets/js/22.9ebe5653.js"><link rel="prefetch" href="/assets/js/23.f1967079.js"><link rel="prefetch" href="/assets/js/24.174f624d.js"><link rel="prefetch" href="/assets/js/25.c79ed86e.js"><link rel="prefetch" href="/assets/js/26.404bf4b8.js"><link rel="prefetch" href="/assets/js/27.2f1aff94.js"><link rel="prefetch" href="/assets/js/28.062e58ea.js"><link rel="prefetch" href="/assets/js/29.20a59d1a.js"><link rel="prefetch" href="/assets/js/3.c5473e86.js"><link rel="prefetch" href="/assets/js/30.930bca93.js"><link rel="prefetch" href="/assets/js/31.bd2ca60e.js"><link rel="prefetch" href="/assets/js/32.0a5874ee.js"><link rel="prefetch" href="/assets/js/33.feeb8947.js"><link rel="prefetch" href="/assets/js/34.030535d4.js"><link rel="prefetch" href="/assets/js/35.01224053.js"><link rel="prefetch" href="/assets/js/36.9bc679ea.js"><link rel="prefetch" href="/assets/js/37.e5d7c81b.js"><link rel="prefetch" href="/assets/js/38.f7b94dc4.js"><link rel="prefetch" href="/assets/js/39.2e4c3e17.js"><link rel="prefetch" href="/assets/js/4.0acad576.js"><link rel="prefetch" href="/assets/js/40.e6cc435a.js"><link rel="prefetch" href="/assets/js/41.f50d104c.js"><link rel="prefetch" href="/assets/js/42.ee95280a.js"><link rel="prefetch" href="/assets/js/43.e003dc81.js"><link rel="prefetch" href="/assets/js/44.56217885.js"><link rel="prefetch" href="/assets/js/45.22c09290.js"><link rel="prefetch" href="/assets/js/46.c698132a.js"><link rel="prefetch" href="/assets/js/47.7e5929fe.js"><link rel="prefetch" href="/assets/js/48.0dc5263c.js"><link rel="prefetch" href="/assets/js/49.3c6d7ea6.js"><link rel="prefetch" href="/assets/js/5.759e7092.js"><link rel="prefetch" href="/assets/js/50.7d658f31.js"><link rel="prefetch" href="/assets/js/51.fbd8c3c3.js"><link rel="prefetch" href="/assets/js/52.e3eb2ede.js"><link rel="prefetch" href="/assets/js/53.10c05965.js"><link rel="prefetch" href="/assets/js/54.0ecccd4c.js"><link rel="prefetch" href="/assets/js/55.a85740c6.js"><link rel="prefetch" href="/assets/js/56.77e3a891.js"><link rel="prefetch" href="/assets/js/57.67babd87.js"><link rel="prefetch" href="/assets/js/58.856f7672.js"><link rel="prefetch" href="/assets/js/59.d03ef1b7.js"><link rel="prefetch" href="/assets/js/6.8621d802.js"><link rel="prefetch" href="/assets/js/60.b1170398.js"><link rel="prefetch" href="/assets/js/61.97dd3d3c.js"><link rel="prefetch" href="/assets/js/62.b2eedb7b.js"><link rel="prefetch" href="/assets/js/63.fb58a706.js"><link rel="prefetch" href="/assets/js/64.9aa1b041.js"><link rel="prefetch" href="/assets/js/65.faaf9d55.js"><link rel="prefetch" href="/assets/js/66.fbba48ae.js"><link rel="prefetch" href="/assets/js/67.c8593857.js"><link rel="prefetch" href="/assets/js/68.52c632f2.js"><link rel="prefetch" href="/assets/js/69.7a87fda1.js"><link rel="prefetch" href="/assets/js/7.594670aa.js"><link rel="prefetch" href="/assets/js/70.0f9d8114.js"><link rel="prefetch" href="/assets/js/71.d7a82f0c.js"><link rel="prefetch" href="/assets/js/72.fb115c3b.js"><link rel="prefetch" href="/assets/js/73.e56484a9.js"><link rel="prefetch" href="/assets/js/74.ea8bc62e.js"><link rel="prefetch" href="/assets/js/75.5c7a35ab.js"><link rel="prefetch" href="/assets/js/76.3617452b.js"><link rel="prefetch" href="/assets/js/77.8ab6c71a.js"><link rel="prefetch" href="/assets/js/78.b1fe5865.js"><link rel="prefetch" href="/assets/js/79.ea4ba328.js"><link rel="prefetch" href="/assets/js/8.178a8915.js"><link rel="prefetch" href="/assets/js/80.42c16667.js"><link rel="prefetch" href="/assets/js/81.b5141187.js"><link rel="prefetch" href="/assets/js/82.17c01558.js"><link rel="prefetch" href="/assets/js/83.b735e3e5.js"><link rel="prefetch" href="/assets/js/84.15e7b175.js"><link rel="prefetch" href="/assets/js/9.e55349fb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ac99ad03.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">gblw</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/FE/" class="nav-link">前端相关</a></div><div class="nav-item"><a href="/RD/" class="nav-link">后端相关</a></div><div class="nav-item"><a href="/utils/" class="nav-link">环境相关</a></div><div class="nav-item"><a href="/DB/" class="nav-link router-link-active">数据库相关</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">npm包</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/generator-easy-koa" target="_blank" rel="noopener noreferrer" class="nav-link external">
  koa工程生成器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/generator-easy-vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue多功能搬砖器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/vue-image-base64" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片转base64组件
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/@gblw/vue-x-ui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue插件@gblw/vue-x-ui
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/ls-cache-files" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ls-cache-files缓存静态文件
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/501981732/my-vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/FE/" class="nav-link">前端相关</a></div><div class="nav-item"><a href="/RD/" class="nav-link">后端相关</a></div><div class="nav-item"><a href="/utils/" class="nav-link">环境相关</a></div><div class="nav-item"><a href="/DB/" class="nav-link router-link-active">数据库相关</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">npm包</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/generator-easy-koa" target="_blank" rel="noopener noreferrer" class="nav-link external">
  koa工程生成器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/generator-easy-vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue多功能搬砖器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/vue-image-base64" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片转base64组件
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/@gblw/vue-x-ui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue插件@gblw/vue-x-ui
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/ls-cache-files" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ls-cache-files缓存静态文件
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/501981732/my-vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/DB/HTTP从入门到放弃.html" class="sidebar-link">HTTP从入门到放弃</a></li><li><a href="/DB/MySQL从入门到放弃.html" class="sidebar-link">MySQL从入门到放弃</a></li><li><a href="/DB/mongoDB从入门到放弃.html" class="active sidebar-link">mongoDB从入门到放弃</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#_1-初识" class="sidebar-link">1.初识</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#_2-node链接操作mongodb" class="sidebar-link">2. node链接操作mongoDB</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#插入数据" class="sidebar-link">插入数据</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#查找数据库" class="sidebar-link">查找数据库</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#更新数据" class="sidebar-link">更新数据</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#删除数据" class="sidebar-link">删除数据</a></li></ul></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#_3-mongoose" class="sidebar-link">3. mongoose</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#schema" class="sidebar-link">Schema</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#model" class="sidebar-link">Model</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#entity" class="sidebar-link">Entity</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#游标" class="sidebar-link">游标</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#objectid" class="sidebar-link">ObjectId</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#node-js-中" class="sidebar-link">Node.js 中</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#db-数据库操作" class="sidebar-link">db - 数据库操作</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#schema-表结构" class="sidebar-link">Schema - 表结构</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#model-文档操作" class="sidebar-link">model - 文档操作</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#entity-文档操作" class="sidebar-link">Entity - 文档操作</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#更新修改器" class="sidebar-link">更新修改器:</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#数组修改器" class="sidebar-link">数组修改器:</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#条件查询" class="sidebar-link">条件查询:</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#类型查询" class="sidebar-link">类型查询:</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#正则表达式" class="sidebar-link">正则表达式:</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#查询数组" class="sidebar-link">查询数组:</a></li><li class="sidebar-sub-header"><a href="/DB/mongoDB从入门到放弃.html#where" class="sidebar-link">where</a></li></ul></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="mongodb从入门到放弃"><a href="#mongodb从入门到放弃" aria-hidden="true" class="header-anchor">#</a> MongoDB从入门到放弃</h1> <h2 id="_1-初识"><a href="#_1-初识" aria-hidden="true" class="header-anchor">#</a> 1.初识</h2> <blockquote><p>安装配置见 之前配置</p></blockquote> <blockquote><p>show databases</p></blockquote> <blockquote><p>use demo-1(数据库名称 切换/创建数据库)</p></blockquote> <blockquote><p>db.dropDatabase()删除数据库</p></blockquote> <blockquote><p>show tables</p></blockquote> <blockquote><p>db.col.drop() 删除集合col</p></blockquote> <ul><li><p>增删改查</p> <ul><li>增</li></ul> <blockquote><p>db.col.insert({title: 'MongoDB 教程', xxx}) 向col集合中插入数据</p></blockquote> <blockquote><p>3.2之后 db.col.insertOne({&quot;a&quot;: 3}) 插入一条</p></blockquote> <blockquote><p>db.col.insertMany([{&quot;b&quot;: 3}, {'c': 4}]) 插入多条</p></blockquote> <ul><li>删</li></ul> <blockquote><p>db.col.deleteMany({}) 删除全部文档</p></blockquote> <blockquote><p>db.col.deleteMany({ status : &quot;A&quot; })  删除status等于A的全部文档</p></blockquote> <blockquote><p>db.col.deleteOne( { status: &quot;D&quot; } )  删除status等于A的一个文档</p></blockquote> <blockquote><p>db.col.remove({})</p></blockquote> <ul><li>改</li></ul> <blockquote><p>3.2版本开始 db.collection.updateOne() 向指定集合更新单个文档</p></blockquote> <pre><code>  db.test_collection.updateOne({&quot;name&quot;:&quot;abc&quot;},{$set:{&quot;age&quot;:&quot;28&quot;}})
</code></pre> <blockquote><p>db.collection.updateMany() 向指定集合更新多个文档</p></blockquote> <ul><li>查</li></ul> <blockquote><p>db.col.find().pretty()</p></blockquote> <blockquote><p>AND语句  db.col.find({key1:value1, key2:value2}).pretty()</p></blockquote> <blockquote><p>OR语句  db.col.find({$or:[{&quot;key1&quot;:&quot;2333&quot;},{&quot;title&quot;: &quot;MongoDB 教程&quot;}]}).pretty()</p></blockquote> <blockquote><p>连用  db.col.find({&quot;likes&quot;: {$gt:50}, $or: [{&quot;by&quot;: &quot;2333&quot;},{&quot;title&quot;: &quot;MongoDB 教程&quot;}]}).pretty()</p></blockquote> <blockquote><p>db.collection.find(query, projection)</p></blockquote> <pre><code>  db.collection.find(query, {title: 1, by: 1}) // inclusion模式 指定返回的键，不返回其他键
  
  db.collection.find(query, {title: 0, by: 0}) // exclusion模式 指定不返回的键,返回其他键
</code></pre></li> <li><p>条件操作符实例</p></li></ul> <div class="language- extra-class"><pre class="language-text"><code>$gt -------- greater than  &gt;
$gte --------- gt equal  &gt;=
$lt -------- less than  &lt;
$lte --------- lt equal  &lt;=
$ne ----------- not equal  !=
$eq  --------  equal  =
</code></pre></div><pre><code>    db.col.find({&quot;likes&quot; : {$gt : 100}})  likes大于100    对应于SQL中的     Select * from col where likes &gt; 100;
    
    db.col.find({likes : {$gte : 100}})  likes大于等于100    对应于SQL中的     Select * from col where likes &gt;= 100;
    
    db.col.find({likes : {$lt :200, $gt : 100}})             对应于SQL中的   Select * from col where likes&gt;100 AND  likes&lt;200;
</code></pre> <ul><li><p>limit 和 skip</p> <pre><code>  db.col.find({},{&quot;title&quot;:1,_id:0}).limit(1).skip(2)   第一个 {} 放 where 条件，为空表示返回集合中所有文档。第二个 {} 指定那些列显示和不显示 （0表示不显示 1表示显示)
</code></pre></li> <li><p>sort 排序</p> <pre><code>  db.col.find().sort({KEY:1})  1 为升序排列，而-1是用于降序排列
</code></pre></li> <li><p>索引：高效查询 索引是特殊的数据结构，索引存储在一个易于遍历读取的数据集合中，索引是对数据库表中一列或多列的值进行排序的一种结构</p></li> <li><pre><code>  db.COLLECTION_NAME.ensureIndex({KEY:1})    Key 值为你要创建的索引字段，1为指定按升序创建索引，如果你想按降序来创建索引指定为-1即可。
</code></pre></li> <li><p>聚合 (aggregate)主要用于处理数据(诸如统计平均值,求和等)，并返回计算后的数据结果。有点类似sql语句中的 count(*)。</p> <pre><code>  db.COLLECTION_NAME.aggregate(AGGREGATE_OPERATION)
</code></pre> <p>eg:</p> <pre><code>  db.mycol.aggregate([{$group : {_id : &quot;$by_user&quot;, num_tutorial : {$sum : 1}}}]) ===&gt;SQL
  select by_user as _id, count(*) as num_tutorial from mycol group by by_user
</code></pre></li></ul> <h2 id="_2-node链接操作mongodb"><a href="#_2-node链接操作mongodb" aria-hidden="true" class="header-anchor">#</a> 2. node链接操作mongoDB</h2> <ul><li>npm install mongodb</li></ul> <h3 id="插入数据"><a href="#插入数据" aria-hidden="true" class="header-anchor">#</a> 插入数据</h3> <div class="language- extra-class"><pre class="language-text"><code>var MongoClient = require('mongodb').MongoClient;
var DB_CONN_STR = 'mongodb://localhost:27017/elm'; # 数据库为 elm
 
var insertData = function(db, callback) {  
    //连接到表 site
    var collection = db.collection('site');
    //插入数据
    var data = [{&quot;name&quot;:&quot;222&quot;,&quot;url&quot;:&quot;www.222.com&quot;},{&quot;name&quot;:&quot;333&quot;,&quot;url&quot;:&quot;www.333.com&quot;}];
    collection.insert(data, function(err, result) { 
        if(err)
        {
            console.log('Error:'+ err);
            return;
        }     
        callback(result);
    });
}
 
MongoClient.connect(DB_CONN_STR, function(err, db) {
    console.log(&quot;连接成功！&quot;);
    insertData(db, function(result) {
        console.log(result);
        db.close();
    });
});
</code></pre></div><h3 id="查找数据库"><a href="#查找数据库" aria-hidden="true" class="header-anchor">#</a> 查找数据库</h3> <div class="language- extra-class"><pre class="language-text"><code>var MongoClient = require('mongodb').MongoClient;
var DB_CONN_STR = 'mongodb://localhost:27017/elm';    
 
var selectData = function(db, callback) {  
  //连接到表  
  var collection = db.collection('site');
  //查询数据
  var whereStr = {&quot;name&quot;:'wm'};
  collection.find(whereStr).toArray(function(err, result) {
    if(err)
    {
      console.log('Error:'+ err);
      return;
    }     
    callback(result);
  });
}
 
MongoClient.connect(DB_CONN_STR, function(err, db) {
  console.log(&quot;连接成功！&quot;);
  selectData(db, function(result) {
    console.log(result);
    db.close();
  });
});
</code></pre></div><h3 id="更新数据"><a href="#更新数据" aria-hidden="true" class="header-anchor">#</a> 更新数据</h3> <div class="language- extra-class"><pre class="language-text"><code>var MongoClient = require('mongodb').MongoClient;
var DB_CONN_STR = 'mongodb://localhost:27017/elm';    
 
var updateData = function(db, callback) {  
    //连接到表  
    var collection = db.collection('site');
    //更新数据
    var whereStr = {&quot;name&quot;:'elm'};
    var updateStr = {$set: { &quot;url&quot; : &quot;https://www.elm.com&quot; }};
    collection.update(whereStr,updateStr, function(err, result) {
        if(err)
        {
            console.log('Error:'+ err);
            return;
        }     
        callback(result);
    });
}
 
MongoClient.connect(DB_CONN_STR, function(err, db) {
    console.log(&quot;连接成功！&quot;);
    updateData(db, function(result) {
        console.log(result);
        db.close();
    });
});
</code></pre></div><h3 id="删除数据"><a href="#删除数据" aria-hidden="true" class="header-anchor">#</a> 删除数据</h3> <div class="language- extra-class"><pre class="language-text"><code>var MongoClient = require('mongodb').MongoClient;
var DB_CONN_STR = 'mongodb://localhost:27017/runoob';    
 
var delData = function(db, callback) {  
  //连接到表  
  var collection = db.collection('site');
  //删除数据
  var whereStr = {&quot;name&quot;:'elm'};
  collection.remove(whereStr, function(err, result) {
    if(err)
    {
      console.log('Error:'+ err);
      return;
    }     
    callback(result);
  });
}
 
MongoClient.connect(DB_CONN_STR, function(err, db) {
  console.log(&quot;连接成功！&quot;);
  delData(db, function(result) {
    console.log(result);
    db.close();
  });
});
</code></pre></div><h2 id="_3-mongoose"><a href="#_3-mongoose" aria-hidden="true" class="header-anchor">#</a> 3. mongoose</h2> <hr> <blockquote><p>一般我们不直接用MongoDB的函数来操作MongoDB数据库 Mongose就是一套操作MongoDB数据库的接口.</p></blockquote> <h3 id="schema"><a href="#schema" aria-hidden="true" class="header-anchor">#</a> Schema</h3> <blockquote><p>一种以文件形式存储的数据库模型骨架，无法直接通往数据库端，也就是说它不具备对数据库的操作能力.可以说是数据属性模型(<em>传统意义的表结构</em>)，又或着是“集合”的模型骨架</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>/* 定义一个 Schema */
var mongoose = require(&quot;mongoose&quot;);

var TestSchema = new mongoose.Schema({
    name : { type:String },//属性name,类型为String
    age  : { type:Number, default:0 },//属性age,类型为Number,默认为0
    time : { type:Date, default:Date.now },
    email: { type:String,default:''}
});
</code></pre></div><p>上面这个 TestSchema包含4个属性 [name, age, time, email]</p> <h3 id="model"><a href="#model" aria-hidden="true" class="header-anchor">#</a> Model</h3> <blockquote><p>由Schema构造生成的模型，除了Schema定义的数据库骨架以外，还具有数据库操作的行为，类似于管理数据库属性、行为的类</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>var db = mongoose.connect(&quot;mongodb://127.0.0.1:27017/test&quot;);

// 创建Model
var TestModel = db.model(&quot;test1&quot;, TestSchema);
</code></pre></div><p>test1 数据库中的集合名称, 不存在会创建.</p> <h3 id="entity"><a href="#entity" aria-hidden="true" class="header-anchor">#</a> Entity</h3> <blockquote><p>由Model创建的实体，使用save方法保存数据，Model和Entity都有能影响数据库的操作，但Model比Entity更具操作性</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>var TestEntity = new TestModel({
       name : &quot;Lenka&quot;,
       age  : 36,
       email: &quot;lenka@qq.com&quot;
});
console.log(TestEntity.name); // Lenka
console.log(TestEntity.age); // 36
</code></pre></div><h3 id="游标"><a href="#游标" aria-hidden="true" class="header-anchor">#</a> 游标</h3> <blockquote><p>MongoDB 使用游标返回find的执行结果.客户端对游标的实现通常能够对最终结果进行有效的控制。可以限制结果的数量，略过部分结果，根据任意键按任意顺序的组合对结果进行各种排序，或者是执行其他一些强的操作。</p></blockquote> <h3 id="objectid"><a href="#objectid" aria-hidden="true" class="header-anchor">#</a> ObjectId</h3> <blockquote><p>存储在mongodb集合中的每个文档（document）都有一个默认的主键_id，这个主键名称是固定的，它可以是mongodb支持的任何数据类型，默认是ObjectId。</p></blockquote> <blockquote><p>ObjectId是一个12字节的 BSON 类型字符串。按照字节顺序，依次代表：</p></blockquote> <ul><li>4字节：UNIX时间戳</li> <li>3字节：表示运行MongoDB的机器</li> <li>2字节：表示生成此_id的进程</li> <li>3字节：由一个随机数开始的计数器生成的值</li></ul> <h3 id="node-js-中"><a href="#node-js-中" aria-hidden="true" class="header-anchor">#</a> Node.js 中</h3> <blockquote><p>package.json 中加入&quot;mongoose&quot;: “*” 字段.npm install 安装依赖.</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>var mongoose = require(&quot;mongoose&quot;);
var db = mongoose.connect(&quot;mongodb://localhost:27017/test&quot;);
</code></pre></div><p>然后引用</p> <h1 id="api"><a href="#api" aria-hidden="true" class="header-anchor">#</a> ====API====</h1> <hr> <div class="language- extra-class"><pre class="language-text"><code>var mongoose = require(&quot;mongoose&quot;);
var db = mongoose.connect(&quot;mongodb://localhost:27017/test&quot;);
</code></pre></div><h3 id="db-数据库操作"><a href="#db-数据库操作" aria-hidden="true" class="header-anchor">#</a> db - 数据库操作</h3> <ol><li><p>挂接数据库连接事件,参数1: 也可以是error</p> <pre><code>db.connection.on(‘open’, callback);
</code></pre></li></ol> <h3 id="schema-表结构"><a href="#schema-表结构" aria-hidden="true" class="header-anchor">#</a> Schema - 表结构</h3> <ol><li><p>构造函数</p> <pre><code> new mongoose.Schema( { name:{type:String}, age:{type:Number, default:10}  } )
</code></pre></li></ol> <p>2.添加属性</p> <pre><code>    Schema.add( { name: ‘String’, email: ‘String’, age: ‘Number’ } )
</code></pre> <p>3.有时候Schema不仅要为后面的Model和Entity提供公共的属性，还要提供公共的方法</p> <pre><code>    Schema.method( ‘say’, function(){console.log(‘hello’);} )
//这样Model和Entity的实例就能使用这个方法了
</code></pre> <p>4.添加静态方法</p> <pre><code>    Schema.static( ‘say’, function(){console.log(‘hello’);} )
//静态方法，只限于在Model层就能使用
</code></pre> <p>5.追加方法</p> <pre><code>    Schema.methods.say = function(){console.log(‘hello’);};
//静态方法，只限于在Model层就能使用
</code></pre> <h3 id="model-文档操作"><a href="#model-文档操作" aria-hidden="true" class="header-anchor">#</a> model - 文档操作</h3> <ol><li><p>构造函数, 参数1:集合名称, 参数2:Schema实例</p> <pre><code> 构造函数, 参数1:集合名称, 参数2:Schema实例
</code></pre></li></ol> <p>2.查询, 参数1忽略,或为空对象则返回所有集合文档</p> <pre><code>    model.find({}, callback);

model.find({},field,callback);
过滤查询,参数2: {‘name’:1, ‘age’:0} 查询文档的返回结果包含name , 不包含age.(_id默认是1)

model.find({},null,{limit:20});
过滤查询,参数3: 游标操作 limit限制返回结果数量为20个,如不足20个则返回所有.

model.findOne({}, callback);
查询找到的第一个文档

model.findById(‘obj._id’, callback);
查询找到的第一个文档,同上. 但是只接受 __id 的值查询
</code></pre> <ol start="3"><li><p>创建, 在集合中创建一个文档</p> <pre><code> Model.create(文档数据, callback))
</code></pre></li> <li><p>更新,参数1:查询条件, 参数2:更新对象,可以使用MondoDB的更新修改器</p> <pre><code> Model.update(conditions, update, function(error)
</code></pre></li> <li><p>删除, 参数1:查询条件</p> <pre><code> Model.remove(conditions,callback);
</code></pre></li></ol> <h3 id="entity-文档操作"><a href="#entity-文档操作" aria-hidden="true" class="header-anchor">#</a> Entity - 文档操作</h3> <ol><li><p>构造函数, 其实就是model的实例</p> <pre><code> new TestModel( { name:‘xueyou’, age:21 } );
</code></pre></li> <li><p>创建, 在集合中创建一个文档.</p> <pre><code> Entity.save(callback);
</code></pre></li></ol> <h1 id="修改器和更新器"><a href="#修改器和更新器" aria-hidden="true" class="header-anchor">#</a> 修改器和更新器</h1> <hr> <h3 id="更新修改器"><a href="#更新修改器" aria-hidden="true" class="header-anchor">#</a> 更新修改器:</h3> <ol><li><p>‘$inc’ 增减修改器,只对数字有效.下面的实例: 找到 age=22的文档,修改文档的age值自增1</p> <pre><code> Model.update({‘age’:22}, {’$inc’:{‘age’:1} }  );
 执行后: age=23
</code></pre></li> <li><p>‘$set’ 指定一个键的值,这个键不存在就创建它.可以是任何MondoDB支持的类型.</p> <pre><code> Model.update({‘age’:22}, {’$set’:{‘age’:‘haha’} }  );
 执行后: age=‘haha’
</code></pre></li> <li><p>‘$unset’ 同上取反,删除一个键</p> <pre><code> Model.update({‘age’:22}, {’$unset’:{‘age’:‘haha’} }  );
 执行后: age键不存在
</code></pre></li></ol> <h3 id="数组修改器"><a href="#数组修改器" aria-hidden="true" class="header-anchor">#</a> 数组修改器:</h3> <ol><li><p>‘$push’ 给一个键push一个数组成员,键不存在会创建</p> <pre><code> Model.update({‘age’:22}, {’$push’:{‘array’:10} }  );
 执行后: 增加一个 array 键,类型为数组, 有一个成员 10
</code></pre></li> <li><p>‘$addToSet’ 向数组中添加一个元素,如果存在就不添加</p> <pre><code> Model.update({‘age’:22}, {’$addToSet’:{‘array’:10} }  );
 执行后: array中有10所以不会添加
</code></pre></li> <li><p>‘$each’ 遍历数组, 和 $push 修改器配合可以插入多个值</p> <pre><code> Model.update({‘age’:22}, {’$push’:{‘array’:{’$each’: [1,2,3,4,5]}} }  );
 执行后: array : [10,1,2,3,4,5]
</code></pre></li> <li><p>‘$pop’ 向数组中尾部删除一个元素</p> <pre><code> Model.update({‘age’:22}, {’$pop’:{‘array’:1} }  );
 执行后: array : [10,1,2,3,4]  tips: 将1改成-1可以删除数组首部元素
</code></pre></li> <li><p>‘$pull’ 向数组中删除指定元素</p> <pre><code> Model.update({‘age’:22}, {’$pull’:{‘array’:10} }  );
 执行后: array : [1,2,3,4]  匹配到array中的10后将其删除
</code></pre></li></ol> <h3 id="条件查询"><a href="#条件查询" aria-hidden="true" class="header-anchor">#</a> 条件查询:</h3> <ul><li><p>$gt -------- greater than  &gt;</p></li> <li><p>$gte --------- gt equal  &gt;=</p></li> <li><p>$lt -------- less than  &lt;</p></li> <li><p>$lte --------- lt equal  &lt;=</p></li> <li><p>$ne ----------- not equal  !=</p></li> <li><p>$eq  --------  equal  =</p> <p>Model.find({“age”:{ “$get”:18 , “$lte”:30 } } );
查询 age 大于等于18并小于等于30的文档</p></li></ul> <h4 id="或查询or"><a href="#或查询or" aria-hidden="true" class="header-anchor">#</a> 或查询OR:</h4> <ul><li><p>‘$in’ 一个键对应多个值</p></li> <li><p>‘$nin’ 同上取反, 一个键不对应指定值</p></li> <li><p>“$or” 多个条件匹配, 可以嵌套 $in 使用</p></li> <li><p>“$not”    同上取反, 查询与特定模式不匹配的文档</p> <p>Model.find({“age”:{ “$in”:[20,21,22,‘a’]} } );
查询 age等于20或21或21或a的文档</p> <p>Model.find({&quot;$or&quot; :  [ {‘age’:18} , {‘name’:‘xueyou’} ] });
查询 age等于18 或 name等于’xueyou’ 的文档</p></li></ul> <h3 id="类型查询"><a href="#类型查询" aria-hidden="true" class="header-anchor">#</a> 类型查询:</h3> <blockquote><p>null 能匹配自身和不存在的值, 想要匹配键的值 为null, 就要通过  “$exists” 条件判定键值已经存在
&quot;$exists&quot; (表示是否存在的意思)</p></blockquote> <pre><code>Model.find(“age” :  { “$in” : [null] , “exists” : true  } );
查询 age值为null的文档

Model.find({name: {$exists: true}},function(error,docs){
    //查询所有存在name属性的文档
});

Model.find({telephone: {$exists: false}},function(error,docs){
  //查询所有不存在telephone属性的文档
});
</code></pre> <h3 id="正则表达式"><a href="#正则表达式" aria-hidden="true" class="header-anchor">#</a> 正则表达式:</h3> <blockquote><p>MongoDb 使用 Prel兼容的正则表达式库来匹配正则表达式</p></blockquote> <pre><code>find( {“name” : /joe/i } )  
查询name为 joe 的文档, 并忽略大小写

find( {“name” : /joe?/i } )
查询匹配各种大小写组合
</code></pre> <h3 id="查询数组"><a href="#查询数组" aria-hidden="true" class="header-anchor">#</a> 查询数组:</h3> <ol><li><p>‘$all’ 匹配数组中多个元素</p> <pre><code> Model.find({“array”:[5,10]} );
 查询 匹配array数组中 既有5又有10的文档
</code></pre></li> <li><p>‘$size’ 匹配数组长度</p> <pre><code>Model.find({“array”:{&quot;$size&quot; : 3} } );
查询 匹配array数组长度为3 的文档
</code></pre></li> <li><p>‘$slice’ 查询子集合返回</p> <pre><code> Model.find({“array”:{&quot;$slice&quot; : 10} } );
 查询 匹配array数组的前10个元素
 
 Model.find({“array”:{&quot;$slice&quot; : [5,10] } } );
 查询 匹配array数组的第5个到第10个元素
 
 Model.find({“array”:10} );
 查询 array(数组类型)键中有10的文档,  array : [1,2,3,4,5,10]  会匹配到

 Model.find({“array[5]”:10} );
 查询 array(数组类型)键中下标5对应的值是10,  array : [1,2,3,4,5,10]  会匹配到
</code></pre></li></ol> <h3 id="where"><a href="#where" aria-hidden="true" class="header-anchor">#</a> where</h3> <blockquote><p>用它可以执行任意javacript语句作为查询的一部分,如果回调函数返回 true 文档就作为结果的一部分返回</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>    find({&quot;$where&quot; : function(){
        for( var x in this ){
         //这个函数中的 this 就是文档
        }
        
        if(this.x !== null &amp;&amp; this.y !== null){
            return this.x + this.y === 10 ? true : false;
        }else{
            return true;
        }
}  }  )
</code></pre></div><pre><code>    简化版本
</code></pre> <div class="language- extra-class"><pre class="language-text"><code>    find( {&quot;$where&quot; :  &quot;this.x + this.y === 10&quot; } )
    find( {&quot;$where&quot; : &quot; function(){ return this.x + this.y ===10; } &quot; } )
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/501981732/my-vuepress/edit/master/DB/mongoDB从入门到放弃.md" target="_blank" rel="noopener noreferrer">改善此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">12/11/2018, 10:55:30 AM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/10.f5aa46b0.js" defer></script><script src="/assets/js/app.2e26f941.js" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>总结篇 | gblw</title>
    <meta name="description" content="一个前端小学生">
    <link rel="icon" href="/favicon.ico">
  <link rel="manifest" href="/manifest.json">
    
    <link rel="preload" href="/assets/css/0.styles.ac99ad03.css" as="style"><link rel="preload" href="/assets/js/app.2e26f941.js" as="script"><link rel="preload" href="/assets/js/47.7e5929fe.js" as="script"><link rel="prefetch" href="/assets/js/1.9abbfca6.js"><link rel="prefetch" href="/assets/js/10.f5aa46b0.js"><link rel="prefetch" href="/assets/js/11.8d9fc089.js"><link rel="prefetch" href="/assets/js/12.da5d20a5.js"><link rel="prefetch" href="/assets/js/13.7ccc43bd.js"><link rel="prefetch" href="/assets/js/14.936637cc.js"><link rel="prefetch" href="/assets/js/15.35e22122.js"><link rel="prefetch" href="/assets/js/16.287d904c.js"><link rel="prefetch" href="/assets/js/17.7040011b.js"><link rel="prefetch" href="/assets/js/18.7659f702.js"><link rel="prefetch" href="/assets/js/19.9e094f67.js"><link rel="prefetch" href="/assets/js/20.1a01400b.js"><link rel="prefetch" href="/assets/js/21.a8d12454.js"><link rel="prefetch" href="/assets/js/22.9ebe5653.js"><link rel="prefetch" href="/assets/js/23.f1967079.js"><link rel="prefetch" href="/assets/js/24.174f624d.js"><link rel="prefetch" href="/assets/js/25.c79ed86e.js"><link rel="prefetch" href="/assets/js/26.404bf4b8.js"><link rel="prefetch" href="/assets/js/27.2f1aff94.js"><link rel="prefetch" href="/assets/js/28.062e58ea.js"><link rel="prefetch" href="/assets/js/29.20a59d1a.js"><link rel="prefetch" href="/assets/js/3.c5473e86.js"><link rel="prefetch" href="/assets/js/30.930bca93.js"><link rel="prefetch" href="/assets/js/31.bd2ca60e.js"><link rel="prefetch" href="/assets/js/32.0a5874ee.js"><link rel="prefetch" href="/assets/js/33.feeb8947.js"><link rel="prefetch" href="/assets/js/34.030535d4.js"><link rel="prefetch" href="/assets/js/35.01224053.js"><link rel="prefetch" href="/assets/js/36.9bc679ea.js"><link rel="prefetch" href="/assets/js/37.e5d7c81b.js"><link rel="prefetch" href="/assets/js/38.f7b94dc4.js"><link rel="prefetch" href="/assets/js/39.2e4c3e17.js"><link rel="prefetch" href="/assets/js/4.0acad576.js"><link rel="prefetch" href="/assets/js/40.e6cc435a.js"><link rel="prefetch" href="/assets/js/41.f50d104c.js"><link rel="prefetch" href="/assets/js/42.ee95280a.js"><link rel="prefetch" href="/assets/js/43.e003dc81.js"><link rel="prefetch" href="/assets/js/44.56217885.js"><link rel="prefetch" href="/assets/js/45.22c09290.js"><link rel="prefetch" href="/assets/js/46.c698132a.js"><link rel="prefetch" href="/assets/js/48.0dc5263c.js"><link rel="prefetch" href="/assets/js/49.3c6d7ea6.js"><link rel="prefetch" href="/assets/js/5.759e7092.js"><link rel="prefetch" href="/assets/js/50.7d658f31.js"><link rel="prefetch" href="/assets/js/51.fbd8c3c3.js"><link rel="prefetch" href="/assets/js/52.e3eb2ede.js"><link rel="prefetch" href="/assets/js/53.10c05965.js"><link rel="prefetch" href="/assets/js/54.0ecccd4c.js"><link rel="prefetch" href="/assets/js/55.a85740c6.js"><link rel="prefetch" href="/assets/js/56.77e3a891.js"><link rel="prefetch" href="/assets/js/57.67babd87.js"><link rel="prefetch" href="/assets/js/58.856f7672.js"><link rel="prefetch" href="/assets/js/59.d03ef1b7.js"><link rel="prefetch" href="/assets/js/6.8621d802.js"><link rel="prefetch" href="/assets/js/60.b1170398.js"><link rel="prefetch" href="/assets/js/61.97dd3d3c.js"><link rel="prefetch" href="/assets/js/62.b2eedb7b.js"><link rel="prefetch" href="/assets/js/63.fb58a706.js"><link rel="prefetch" href="/assets/js/64.9aa1b041.js"><link rel="prefetch" href="/assets/js/65.faaf9d55.js"><link rel="prefetch" href="/assets/js/66.fbba48ae.js"><link rel="prefetch" href="/assets/js/67.c8593857.js"><link rel="prefetch" href="/assets/js/68.52c632f2.js"><link rel="prefetch" href="/assets/js/69.7a87fda1.js"><link rel="prefetch" href="/assets/js/7.594670aa.js"><link rel="prefetch" href="/assets/js/70.0f9d8114.js"><link rel="prefetch" href="/assets/js/71.d7a82f0c.js"><link rel="prefetch" href="/assets/js/72.fb115c3b.js"><link rel="prefetch" href="/assets/js/73.e56484a9.js"><link rel="prefetch" href="/assets/js/74.ea8bc62e.js"><link rel="prefetch" href="/assets/js/75.5c7a35ab.js"><link rel="prefetch" href="/assets/js/76.3617452b.js"><link rel="prefetch" href="/assets/js/77.8ab6c71a.js"><link rel="prefetch" href="/assets/js/78.b1fe5865.js"><link rel="prefetch" href="/assets/js/79.ea4ba328.js"><link rel="prefetch" href="/assets/js/8.178a8915.js"><link rel="prefetch" href="/assets/js/80.42c16667.js"><link rel="prefetch" href="/assets/js/81.b5141187.js"><link rel="prefetch" href="/assets/js/82.17c01558.js"><link rel="prefetch" href="/assets/js/83.b735e3e5.js"><link rel="prefetch" href="/assets/js/84.15e7b175.js"><link rel="prefetch" href="/assets/js/9.e55349fb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ac99ad03.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">gblw</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/FE/" class="nav-link router-link-active">前端相关</a></div><div class="nav-item"><a href="/RD/" class="nav-link">后端相关</a></div><div class="nav-item"><a href="/utils/" class="nav-link">环境相关</a></div><div class="nav-item"><a href="/DB/" class="nav-link">数据库相关</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">npm包</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/generator-easy-koa" target="_blank" rel="noopener noreferrer" class="nav-link external">
  koa工程生成器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/generator-easy-vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue多功能搬砖器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/vue-image-base64" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片转base64组件
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/@gblw/vue-x-ui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue插件@gblw/vue-x-ui
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/ls-cache-files" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ls-cache-files缓存静态文件
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/501981732/my-vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/FE/" class="nav-link router-link-active">前端相关</a></div><div class="nav-item"><a href="/RD/" class="nav-link">后端相关</a></div><div class="nav-item"><a href="/utils/" class="nav-link">环境相关</a></div><div class="nav-item"><a href="/DB/" class="nav-link">数据库相关</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">npm包</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/generator-easy-koa" target="_blank" rel="noopener noreferrer" class="nav-link external">
  koa工程生成器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/generator-easy-vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue多功能搬砖器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/vue-image-base64" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片转base64组件
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/@gblw/vue-x-ui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue插件@gblw/vue-x-ui
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/ls-cache-files" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ls-cache-files缓存静态文件
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/501981732/my-vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/FE/代码规范.html" class="sidebar-link">代码规范</a></li><li><a href="/FE/性能优化.html" class="active sidebar-link">性能优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FE/性能优化.html#总结篇" class="sidebar-link">总结篇</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#性能优化" class="sidebar-link">性能优化</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#webpack优化部分-构建优化部分" class="sidebar-link">webpack优化部分 构建优化部分</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FE/性能优化.html#压缩js（去掉无效代码、去掉日志输出代码、缩短变量名等优化。）" class="sidebar-link">压缩JS（去掉无效代码、去掉日志输出代码、缩短变量名等优化。）</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#压缩css-css-loader已经内置开启-minimize" class="sidebar-link">压缩CSS css-loader已经内置开启 minimize</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#缩小文件搜索范围-构建时优化" class="sidebar-link">缩小文件搜索范围 构建时优化</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#externals（外部扩展）从代码中拆公共模块，走cdn" class="sidebar-link">externals（外部扩展）从代码中拆公共模块，走cdn</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#cdn加速" class="sidebar-link">cdn加速</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#图片压缩-示例如上-image-webpack-plugin-或者-imagemin-webpack-plugin-等" class="sidebar-link">图片压缩 示例如上 image-webpack-plugin 或者 imagemin-webpack-plugin 等</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#cdn-预解析-加上-dns-prefetch" class="sidebar-link">cdn 预解析 加上 dns-prefetch</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#dll-动态链接库-dllplugin和dllreferenceplugin-可以搭配-html-webpack-include-assets-plugin-来动态在模板上引入dll" class="sidebar-link">dll 动态链接库 DllPlugin和DllReferencePlugin 可以搭配 html-webpack-include-assets-plugin 来动态在模板上引入dll</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#提取公共代码commonschunkplugin" class="sidebar-link">提取公共代码CommonsChunkPlugin</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#tree-shaking" class="sidebar-link">tree shaking</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#启用-scope-hoisting-作用域提升-new-webpack-optimize-moduleconcatenationplugin" class="sidebar-link">启用 scope hoisting  作用域提升   new webpack.optimize.ModuleConcatenationPlugin()</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#prepack-优化代码运行时的效率-目前技术不成熟，慎用" class="sidebar-link">prepack(优化代码运行时的效率 目前技术不成熟，慎用)</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#happypack" class="sidebar-link">happypack</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#prefetch-preload" class="sidebar-link">prefetch/preload</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#按需加载-webpack有强大的代码分割能力" class="sidebar-link">按需加载 webpack有强大的代码分割能力</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#分析插件" class="sidebar-link">分析插件</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#hrm-模块热替换" class="sidebar-link">HRM 模块热替换</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#接入serviceworker-workbox-webpack-plugin" class="sidebar-link">接入serviceWorker workbox-webpack-plugin</a></li></ul></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#gpu加速原理" class="sidebar-link">GPU加速原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FE/性能优化.html#网页的渲染过程" class="sidebar-link">网页的渲染过程</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#哪些些会生成独立的层" class="sidebar-link">哪些些会生成独立的层</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#哪些属性可以开启gpu加速" class="sidebar-link">哪些属性可以开启GPU加速</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#硬件加速（gpu加速）" class="sidebar-link">硬件加速（GPU加速）</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#cpu-vs-gpu" class="sidebar-link">CPU VS GPU</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#layer模型" class="sidebar-link">layer模型</a></li></ul></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#重绘" class="sidebar-link">重绘</a></li><li class="sidebar-sub-header"><a href="/FE/性能优化.html#重排" class="sidebar-link">重排</a></li></ul></li><li><a href="/FE/缓存.html" class="sidebar-link">前端缓存</a></li><li><a href="/FE/从0写个SDK包ls-cache-files.html" class="sidebar-link">从0写个SDK:性能优化之ls-cache-files</a></li><li><a href="/FE/从0用ts重构axios.html" class="sidebar-link">从0用ts重构axios</a></li><li><a href="/FE/优雅的使用icon.html" class="sidebar-link">优雅的使用icon</a></li><li><a href="/FE/css workflow.html" class="sidebar-link">css workflow</a></li><li><a href="/FE/csshoudini.html" class="sidebar-link">csshoudini</a></li><li><a href="/FE/postcss了解下~.html" class="sidebar-link">postcss了解下~</a></li><li><a href="/FE/babel polyfill runtime了解一下.html" class="sidebar-link">babel polyfill runtime了解一下</a></li><li><a href="/FE/FLIP动画.html" class="sidebar-link">FLIP动画</a></li><li><a href="/FE/GPU加速原理.html" class="sidebar-link">GPU加速原理</a></li><li><a href="/FE/Promise原理.html" class="sidebar-link">Promise原理</a></li><li><a href="/FE/前端路由原理.html" class="sidebar-link">前端路由原理</a></li><li><a href="/FE/webpack原理.html" class="sidebar-link">webpack原理</a></li><li><a href="/FE/设计模式.html" class="sidebar-link">设计模式</a></li><li><a href="/FE/数据结构与算法.html" class="sidebar-link">数据结构与算法</a></li><li><a href="/FE/image转base64插件.html" class="sidebar-link">image转base64插件</a></li><li><a href="/FE/canvas.html" class="sidebar-link">canvas(小册子)</a></li><li><a href="/FE/如何写好动效.html" class="sidebar-link">大厂H5开发实战手册:如何写好动效.md(小册子)</a></li><li><a href="/FE/秒做动画.html" class="sidebar-link">秒做动画:AE稿直接生成动画</a></li><li><a href="/FE/前端安全.html" class="sidebar-link">前端安全</a></li><li><a href="/FE/img-2源码看动态创建webworker.html" class="sidebar-link">img-2源码看动态创建webworker</a></li><li><a href="/FE/eventloop.html" class="sidebar-link">eventloop</a></li><li><a href="/FE/typescript.html" class="sidebar-link">typescript</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>vue相关</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>react相关</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>日记杂七乱八</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h2 id="总结篇"><a href="#总结篇" aria-hidden="true" class="header-anchor">#</a> 总结篇</h2> <p><a href="/img/性能优化--1.缓存.pdf">性能优化--1.缓存</a></p> <embed src="/img/性能优化--1.缓存.pdf" width="500" height="375" type="application/pdf"> <p><a href="/img/性能优化--2.网络篇.pdf">性能优化--2.网络篇</a></p> <embed src="/img/性能优化--1.缓存.pdf" width="500" height="375" type="application/pdf"> <p><a href="/img/性能优化--3.渲染篇.pdf">性能优化--3.渲染篇</a></p> <embed src="/img/性能优化--3.渲染篇.pdf" width="500" height="375" type="application/pdf"> <p><a href="/img/性能优化--4.应用篇.pdf">性能优化--4.应用篇</a></p> <embed src="/img/性能优化--4.应用篇.pdf" width="500" height="375" type="application/pdf"> <h2 id="性能优化"><a href="#性能优化" aria-hidden="true" class="header-anchor">#</a> 性能优化</h2> <ol><li><p>html css js img 最简单的压缩合并 YUI Compressor tinyPNG https://zh.recompressor.com/</p></li> <li><p>雅虎军规</p></li> <li><p>服务器端的：etag gzip</p></li> <li><p>第三方库代码：资源压缩 强缓etag jq vue</p></li> <li><p>渐进式图片加载 首先加载低质量或模糊的图像，然后在页面继续加载时，使用 Guy Podjarny 提出的 LQIP (Low Quality Image Placeholders) technique（低质量图像占位符）技术替换它们的清晰版本</p></li> <li><p>业务代码：大容量的解决方案 -&gt; 异步</p> <ul><li>html css js -&gt; 数据库里 h5页面localstorage扩容（postmessage）</li> <li>将本地资源已key:value形式存入localstorage,请求文件前先对比请求的资源和相应的key是否匹配，匹配的话就读取激活对应的文件，否则再去请求资源</li></ul></li> <li><p>web本地存储
-localStorage 5M内存，but超过2.5M某些机型会卡顿</p> <ul><li><strong>localStorage扩容</strong> 5M的限制是针对同域的，可以利用iframe跨域扩容localStorage（postmessage），不过这种就是异步的了</li> <li>webSQL关系型</li> <li>indexedDB非关系型 是webSQL的继承者更加好用</li> <li><a href="https://localforage.docschina.org/" target="_blank" rel="noopener noreferrer">localforage<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 为你解决一切，针对浏览器做降级处理本地存储</li> <li>manifest 更新是个坑</li> <li>service worker 拦截掉本地所有网络请求 //需要编写一定量的代码</li></ul></li> <li><p><strong>移动端测试网速方案</strong>(根据网速判断是加载二倍图还是三杯图)</p> <ul><li>navigator.connection</li> <li>服务端放个1*1图片 客户端new Image() 测时差<div class="language- extra-class"><pre class="language-text"><code>let img = new Image();
    const size = 1
        img.src = ''     // 假如是个1k的图片
    let start = Date.now()
        img.onLoad = function() {
            let end = Date.now()
            let speed = size / (end - start) / 1000   网速 
            if( )
        }
</code></pre></div></li></ul></li> <li><p>cdn 1.找到离你最近</p></li> <li><p>缓存静态资源</p></li> <li><p>不用带那么多cookie</p></li> <li><p>并发数量有限制 不放一个cdn</p></li> <li><p>dns预解析 dns-prefetch</p></li></ol> <blockquote><p>DNS 请求需要的带宽非常小，但是延迟却有点高，这点在手机网络上特别明显。预读取 DNS 能让延迟明显减少一些，例如用户点击链接时。在某些情况下，延迟能减少一秒钟。</p></blockquote> <blockquote><p>在某些浏览器中这个预读取的行为将会与页面实际内容并行发生（而不是串行）。正因如此，某些高延迟的域名的解析过程才不会卡住资源的加载。</p></blockquote> <blockquote><p>这样可以极大的加速（尤其是移动网络环境下）页面的加载。在某些图片较多的页面中，在发起图片加载请求之前预先把域名解析好将会有至少 5% 的图片加载速度提升
<code>&lt;meta http-equiv=&quot;x-dns-prefetch-control&quot; content=&quot;on&quot;&gt; &lt;link href='j1.58cdn.com' rel='dns-prefetch'&gt;</code></p></blockquote> <ol start="13"><li><p>preconnect预链接
浏览器要建立一个连接，一般需要经过DNS查找，TCP三次握手和TLS协商（如果是https的话），这些过程都是需要相当的耗时的，所以preconnect，就是一项使浏览器能够预先建立一个连接，等真正需要加载资源的时候就能够直接请求了。</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;link rel=&quot;preconnect&quot; href=&quot;//example.com&quot;&gt;
&lt;link rel=&quot;preconnect&quot; href=&quot;//cdn.example.com&quot; crossorigin&gt;
</code></pre></div></li> <li><p>/prefetch/preload/</p></li> <li><p>测网速 判断 然后 2倍图3倍图 去掉无用功能 只留核心组件</p></li></ol> <h2 id="webpack优化部分-构建优化部分"><a href="#webpack优化部分-构建优化部分" aria-hidden="true" class="header-anchor">#</a> webpack优化部分 构建优化部分</h2> <h3 id="压缩js（去掉无效代码、去掉日志输出代码、缩短变量名等优化。）"><a href="#压缩js（去掉无效代码、去掉日志输出代码、缩短变量名等优化。）" aria-hidden="true" class="header-anchor">#</a> 压缩JS（去掉无效代码、去掉日志输出代码、缩短变量名等优化。）</h3> <pre><code>- **uglifyjs-webpack-plugin** or **new webpack.optimize.UglifyJsPlugin** 
- **webpack-parallel-uglify-plugin** 多进程压缩文件,类似happyPack

 ```
 const ParallelUglifyPlugin = require('webpack-parallel-uglify-plugin');
   new ParallelUglifyPlugin({
      // 传递给 UglifyJS 的参数
      uglifyJS: {
        output: {
          // 最紧凑的输出
          beautify: false,
          // 删除所有的注释
          comments: false,
        },
        compress: {
          // 在UglifyJs删除没有用到的代码时不输出警告
          warnings: false,
          // 删除所有的 `console` 语句，可以兼容ie浏览器
          drop_console: true,
          // 内嵌定义了但是只用到一次的变量
          collapse_vars: true,
          // 提取出出现多次但是没有定义成变量去引用的静态值
          reduce_vars: true,
        }
      },
    }),
 ```
</code></pre> <h3 id="压缩css-css-loader已经内置开启-minimize"><a href="#压缩css-css-loader已经内置开启-minimize" aria-hidden="true" class="header-anchor">#</a> 压缩CSS css-loader已经内置开启 <strong>minimize</strong></h3> <pre><code>```
const ExtractTextPlugin = require('extract-text-webpack-plugin');
rules: [
  {
    test: /\.css/,
    // 提取出 Chunk 中的 CSS 代码到单独的文件中
    use: ExtractTextPlugin.extract({
      // 通过 minimize 选项压缩 CSS 代码
      use: ['css-loader?minimize']
    }),
  },
]
```
</code></pre> <h3 id="缩小文件搜索范围-构建时优化"><a href="#缩小文件搜索范围-构建时优化" aria-hidden="true" class="header-anchor">#</a> 缩小文件搜索范围 构建时优化</h3> <pre><code>-  配置**loader 缓存** 以及**include exclude**
```
    rules: [
      {
        // 如果项目源码中只有 js 文件就不要写成 /\.jsx?$/，提升正则表达式性能
        test: /\.js$/,
        // babel-loader 支持缓存转换出的结果，通过 cacheDirectory 选项开启
        use: ['babel-loader?cacheDirectory'],
        // 只对项目根目录下的 src 目录中的文件采用 babel-loader
        include: path.resolve(__dirname, 'src'),
      },
    ]
```
- 配置 **resolve.modules**(resolve.modules 用于配置 Webpack 去哪些目录下寻找第三方模块。)

```
module.exports = {
  resolve: {
    // 使用绝对路径指明第三方模块存放的位置，以减少搜索步骤
    modules: [path.resolve(__dirname, 'node_modules')]
  },
};
```
- 配置**resolve.mainFields** 字段 （慎用 除非你知道你用的所有第三方模块的入口文件描述）

```
    第三方包可能有根据不同的运行环境有多个入口文件
    为了减少搜索步骤，在你明确第三方模块的入口文件描述字段时，你可以把它设置的尽量少。
  resolve: {
    // 只采用 main 字段作为入口文件描述字段，以减少搜索步骤
    mainFields: ['main'],
    },
```
- 配置 **resove.alias**

```
  resolve: {
    // 使用 alias 把导入 react 的语句换成直接使用单独完整的 react.min.js 文件，
    // 减少耗时的递归解析操作
    alias: {
    'react': path.resolve(__dirname, './node_modules/react/dist/react.min.js'),
}
</code></pre> <p>},
```
- 配置 <strong>resolve.extensions</strong> (配置后缀默认 ['.js','.json']) 尽可能较少默认后缀 频繁使用的放前面 等</p> <h3 id="externals（外部扩展）从代码中拆公共模块，走cdn"><a href="#externals（外部扩展）从代码中拆公共模块，走cdn" aria-hidden="true" class="header-anchor">#</a> <strong>externals</strong>（外部扩展）从代码中拆公共模块，走cdn</h3> <pre><code>```
  externals: {  
     'vue': 'Vue',  
     'vue-router': 'VueRouter',  
     'axios': 'axios'  
   }
```
</code></pre> <h3 id="cdn加速"><a href="#cdn加速" aria-hidden="true" class="header-anchor">#</a> <strong>cdn加速</strong></h3> <pre><code>业界比较成熟的做法：
- 针对HTML 不开启缓存，放到服务器上而不是CDN，同时关闭自己服务器上的缓存，服务器会提供HTML和接口数据
- 针对静态JS CSS IMAGE等，开启CDN和缓存，同时文件内容带上hash
- 同时HTML进入资源地址也要改成CDN的地址 带上hash 之前的相对路径都改成了指向CDN服务的结对路径
- 同一时刻针对同一个域名的资源并行请求是有限制的话，所以会把js css img 分别放到3个cdn下 js.cdn.com css.cdn.com img.cdn.com
- 当然多域名 又会增加域名解析时间。 可以通过 **CDN预解析** 较少解析带来的延迟
webpack 接入cdn

```
const path = require('path');
const ExtractTextPlugin = require('extract-text-webpack-plugin');
const {WebPlugin} = require('web-webpack-plugin');
module.exports = {
</code></pre> <p>...
output: {
// 给输出的 JavaScript 文件名称加上 Hash 值
filename: '[name]<em>[chunkhash:8].js',
path: path.resolve(__dirname, './dist'),
// 指定存放 JavaScript 文件的 CDN 目录 URL
publicPath: '//js.cdn.com/id/',
},
module: {
rules: [
{
// 增加对 CSS 文件的支持
test: /.css/,
// 提取出 Chunk 中的 CSS 代码到单独的文件中
use: ExtractTextPlugin.extract({
// 压缩 CSS 代码
use: ['css-loader?minimize'],
// 指定存放 CSS 中导入的资源（例如图片）的 CDN 目录 URL
publicPath : '//img.cdn.com/id/'
}),
},
{
// 增加对 PNG 文件的支持
test: /.png/,
// 给输出的 PNG 文件名称加上 Hash 值
use: ['file-loader?name=[name]</em>[hash:8].[ext]'],
},
...
]
},
plugins: [
new WebPlugin({
template: './template.html',
filename: 'index.html',
// 指定存放 CSS 文件的 CDN 目录 URL
stylePublicPath: '//css.cdn.com/id/',
}),
new ExtractTextPlugin({
// 给输出的 CSS 文件名称加上 Hash 值
filename: <code>[name]_[contenthash:8].css</code>,
}),
//keep module.id stable when vendor modules does not change
new webpack.HashedModuleIdsPlugin(),
],
};</p> <pre><code>```
我一般是通过loader来配置图片的cdn

```
区分环境 生产环境下加载cdn图片，并且启用图片压缩，开发环境下加载本地图片
const ISPROD = process.env.NODE_ENV === 'production'
const IMGURL = '[name].[ext]'
const IMAGELOADER = ISPROD ? `image-webpack-loader?{mozjpeg: {progressive: true,quality: 65},pngquant:{quality: &quot;55-80&quot;, speed: 4}}` : null
const IMG_PUBLICPATH = '//img.58cdn.com.cn/crop/baseteam/yunying/pc/gzpp/img/'
const IMG_QUERY = ISPROD ? `&amp;name=${IMGURL}&amp;outputPath=/img&amp;publicPath=${IMG_PUBLICPATH}` : `&amp;name=${DEVIMGURL}`
{
    test: /\.(png|jpe?g|gif|svg)(\?.*)?$/,
    use: [
        `url-loader?limit=10000${IMG_QUERY}`,
        IMAGELOADER,
    ]
},
```
</code></pre> <h3 id="图片压缩-示例如上-image-webpack-plugin-或者-imagemin-webpack-plugin-等"><a href="#图片压缩-示例如上-image-webpack-plugin-或者-imagemin-webpack-plugin-等" aria-hidden="true" class="header-anchor">#</a> 图片压缩 示例如上 <strong>image-webpack-plugin</strong> 或者 <strong>imagemin-webpack-plugin</strong> 等</h3> <h3 id="cdn-预解析-加上-dns-prefetch"><a href="#cdn-预解析-加上-dns-prefetch" aria-hidden="true" class="header-anchor">#</a> cdn 预解析 加上 <strong>dns-prefetch</strong></h3> <h3 id="dll-动态链接库-dllplugin和dllreferenceplugin-可以搭配-html-webpack-include-assets-plugin-来动态在模板上引入dll"><a href="#dll-动态链接库-dllplugin和dllreferenceplugin-可以搭配-html-webpack-include-assets-plugin-来动态在模板上引入dll" aria-hidden="true" class="header-anchor">#</a> dll 动态链接库 <strong>DllPlugin和DllReferencePlugin</strong> 可以搭配 <strong>html-webpack-include-assets-plugin</strong> 来动态在模板上引入dll</h3> <pre><code>- 区别 CommonsChunkPlugin：webpack每次打包实际还是会处理这些第三方库，但是打包之后能和第三方库和我们业务代码分开，DLLPlugin 可提前把第三方库完全分开，每次只打包自己业务代码
- 区别 externals：
</code></pre> <h3 id="提取公共代码commonschunkplugin"><a href="#提取公共代码commonschunkplugin" aria-hidden="true" class="header-anchor">#</a> 提取公共代码CommonsChunkPlugin</h3> <pre><code>一般策略是 
1. 第三方基本库放到一个js中(为了缓存)
2. 剔除第三方基本库公共部分放一个js
3. 每个页面自己的js
</code></pre> <h3 id="tree-shaking"><a href="#tree-shaking" aria-hidden="true" class="header-anchor">#</a> <strong>tree shaking</strong></h3> <pre><code>- 第三方采用的commonJS是无效的 因为 ES6 模块化语法是静态的（导入导出语句中的路径必须是静态的字符串，而且不能放入其它代码块中），这让 Webpack 可以简单的分析出哪些 export 的被 import 过了。 如果你采用 ES5 中的模块化，例如 module.export={...}、require(x+y)、if(x){require('./util')}，Webpack 无法分析出哪些代码可以剔除。
- 一般第三方库会有两个入口文件

```
如redux package.json
{
    &quot;main&quot;: &quot;lib/index.js&quot;, // 指明采用 CommonJS 模块化的代码入口
    &quot;jsnext:main&quot;: &quot;es/index.js&quot; // 指明采用 ES6 模块化的代码入口 （社区约定）
}
1. webpack约定优先入口文件
resolve: {
    mainFields: ['jsnext:main', 'browser', 'main']
},
2. 修改.babelrc 让其保留 ES6 模块化语句
{
    &quot;presets&quot;: [
    [
        &quot;env&quot;,
    {
        &quot;modules&quot;: false //关闭babel模块转化功能
    }
    ]
  ]
}
3. webpack只是指出那些函数没用上，还要通过UglifyJS 去剔除掉无用的代码
```
</code></pre> <h3 id="启用-scope-hoisting-作用域提升-new-webpack-optimize-moduleconcatenationplugin"><a href="#启用-scope-hoisting-作用域提升-new-webpack-optimize-moduleconcatenationplugin" aria-hidden="true" class="header-anchor">#</a> 启用 <strong>scope hoisting</strong>  作用域提升   new webpack.optimize.ModuleConcatenationPlugin()</h3> <pre><code>好处
- 代码体积更小，因为函数申明语句会产生大量代码；
- 代码在运行时因为创建的函数作用域更少了，内存开销也随之变小。
- 前提： **tree shake**一样源码必须采用 ES6 模块化语句和 
- [scope hoisting原理](#scopehositing)
	- 分析出模块之间的依赖关系，尽可能的把打散的模块合并到一个函数中去，但前提是不能造成代码冗余。 因此只有那些被引用了一次的模块才能被合并。  
</code></pre> <div class="language- extra-class"><pre class="language-text"><code>module.exports = {
  resolve: {
    mainFields: ['jsnext:main', 'browser', 'main']
  },
  plugins: [
    new webpack.optimize.ModuleConcatenationPlugin(),
  ],
};
</code></pre></div><h3 id="prepack-优化代码运行时的效率-目前技术不成熟，慎用"><a href="#prepack-优化代码运行时的效率-目前技术不成熟，慎用" aria-hidden="true" class="header-anchor">#</a> <strong>prepack</strong>(优化代码运行时的效率 目前技术不成熟，慎用)</h3> <pre><code>- 在保持运行结果一致的情况下，改变源代码的运行逻辑，输出性能更高的 JavaScript 代码。 实际上 Prepack 就是一个部分求值器，编译代码时提前将计算结果放到编译后的代码中，而不是在代码运行时才去求值。 
- 通过在编译阶段预先执行了源码得到执行结果 prepack-webpack-plugin
- [prepack运行原理](#prepack) 
	- 通过 Babel 把 JavaScript 源码解析成抽象语法树（AST），以方便更细粒度地分析源码；
	- Prepack 实现了一个 JavaScript 解释器，用于执行源码。借助这个解释器 Prepack 才能掌握源码具体是如何执行的，并把执行过程中的结果返回到输出中。
- prepack目前技术不成熟 慎用
</code></pre> <h3 id="happypack"><a href="#happypack" aria-hidden="true" class="header-anchor">#</a> <strong>happypack</strong></h3> <pre><code>- 构建时优化，任务分解给多个子进程去并发的执行，子进程处理完后再把结果发送给主进程。
- [hanppyPack原理]()：把 Loader 对文件的转换操作部分任务分解到多个进程去并行处理，从而减少了总的构建时间。把 Loader 处理的文件都先交给了 happypack/loader 去处理，收集到了这些文件的处理权后 HappyPack 就好统一分配了。
	1. 每通过 new HappyPack() 实例化一个 HappyPack 其实就是告诉 HappyPack 核心调度器如何通过一系列 Loader 去转换一类文件，并且可以指定如何给这类转换操作分配子进程。

	2. 核心调度器的逻辑代码在主进程中，也就是运行着 Webpack 的进程中，核心调度器会把一个个任务分配给当前空闲的子进程，子进程处理完毕后把结果发送给核心调度器，它们之间的数据交换是通过进程间通信 API 实现的。

	3. 核心调度器收到来自子进程处理完毕的结果后会通知 Webpack 该文件处理完毕。

```

const HappyPack = require('happypack');
// 构造出共享进程池，进程池中包含5个子进程
const happyThreadPool = HappyPack.ThreadPool({ size: 5 });

module.exports = {
 module: {
    rules: [
      {
        test: /\.js$/,
        // 把对 .js 文件的处理转交给 id 为 babel 的 HappyPack 实例
        use: ['happypack/loader?id=babel'],
        exclude: path.resolve(__dirname, 'node_modules'),
      },
      {
        // 把对 .css 文件的处理转交给 id 为 css 的 HappyPack 实例
        test: /\.css$/,
        use: ExtractTextPlugin.extract({
          use: ['happypack/loader?id=css'],
        }),
      },
    ]
  },
  plugins: [
    new HappyPack({
      // 用唯一的标识符 id 来代表当前的 HappyPack 是用来处理一类特定的文件
      id: 'babel',
      // 如何处理 .js 文件，用法和 Loader 配置中一样
      loaders: ['babel-loader?cacheDirectory'],
      // 使用共享进程池中的子进程去处理任务
      threadPool: happyThreadPool,
    }),
    new HappyPack({
      id: 'css',
      // 如何处理 .css 文件，用法和 Loader 配置中一样
      loaders: ['css-loader'],
      // 使用共享进程池中的子进程去处理任务
      threadPool: happyThreadPool,
    }),
  ],
};
```
</code></pre> <h3 id="prefetch-preload"><a href="#prefetch-preload" aria-hidden="true" class="header-anchor">#</a> <strong>prefetch/preload</strong></h3> <pre><code>- [webopack4已支持](https://webpack.docschina.org/guides/code-splitting/#prefetching-preloading-modules) 但是4.6之后才支持

```
import(/* webpackPreload: true */ 'ChartingLibrary');
import(/* webpackPrefetch: true */ 'LoginModal');
```
- 或借用插件
	1.  [webpack插件resource-hints-webpack-plugin](https://github.com/jantimon/resource-hints-webpack-plugin) similarly no async chunk support
	2. [preload-webpack-plugin](https://github.com/vuejs/preload-webpack-plugin)
    3. [[译]Preload，Prefetch 和它们在 Chrome 之中的优先级](https://juejin.im/post/58e8acf10ce46300585a7a42?utm_source=gold-miner&amp;utm_medium=readme&amp;utm_campaign=github)
</code></pre> <h3 id="按需加载-webpack有强大的代码分割能力"><a href="#按需加载-webpack有强大的代码分割能力" aria-hidden="true" class="header-anchor">#</a> <strong>按需加载</strong> webpack有强大的代码分割能力</h3> <pre><code>```
import(/* webpackChunkName: &quot;show&quot; */ './show')
```

**webpack支持import语法的支持**，当执行到import时

- 以 ./show.js 为入口新生成一个 Chunk；
- 当代码执行到 import 所在语句时才会去加载由 Chunk 对应生成的文件。
- import 返回一个 Promise，当文件加载成功时可以在 Promise 的 then 方法中获取到 show.js 导出的内容。
- /* webpackChunkName: &quot;show&quot; */ 为动态生成的文件取名字， OR 默认[id].js,当然为了正确输出文件名字 需要配置出口
- babel-plugin-syntax-dynamic-import

```
module.exports = {
  output: {
    // 为动态加载的 Chunk 配置输出文件的名称
    chunkFilename: '[name].js',
  }
};
```

- vue按需加载： 结合 Vue 的异步组件和 Webpack 的代码分割功能，轻松实现路由组件的懒加载。

```
vue按需加载比较简单

const index = () =&gt; import(/* webpackChunkName: &quot;index&quot; */ &quot;@/components/index.vue&quot;);
```
- react按需加载Router 

```
import React, {PureComponent, createElement} from 'react';
import {render} from 'react-dom';
import {HashRouter, Route, Link} from 'react-router-dom';
import PageHome from './pages/home';

/**
 * 异步加载组件
 * @param load 组件加载函数，load 函数会返回一个 Promise，在文件加载完成时 resolve
 * @returns {AsyncComponent} 返回一个高阶组件用于封装需要异步加载的组件
 */
function getAsyncComponent(load) {
  return class AsyncComponent extends PureComponent {

    componentDidMount() {
      // 在高阶组件 DidMount 时才去执行网络加载步骤
      load().then(({default: component}) =&gt; {
        // 代码加载成功，获取到了代码导出的值，调用 setState 通知高阶组件重新渲染子组件
        this.setState({
          component,
        })
      });
    }

    render() {
      const {component} = this.state || {};
      // component 是 React.Component 类型，需要通过 React.createElement 生产一个组件实例
      return component ? createElement(component) : null;
    }
  }
}

// 根组件
function App() {
  return (
    &lt;HashRouter&gt;
      &lt;div&gt;
        &lt;nav&gt;
          &lt;Link to='/'&gt;Home&lt;/Link&gt; | &lt;Link to='/about'&gt;About&lt;/Link&gt; | &lt;Link to='/login'&gt;Login&lt;/Link&gt;
        &lt;/nav&gt;
        &lt;hr/&gt;
        &lt;Route exact path='/' component={PageHome}/&gt;
        &lt;Route path='/about' component={getAsyncComponent(
          // 异步加载函数，异步地加载 PageAbout 组件
          () =&gt; import(/* webpackChunkName: 'page-about' */'./pages/about')
        )}
        /&gt;
        &lt;Route path='/login' component={getAsyncComponent(
          // 异步加载函数，异步地加载 PageAbout 组件
          () =&gt; import(/* webpackChunkName: 'page-login' */'./pages/login')
        )}
        /&gt;
      &lt;/div&gt;
	&lt;/HashRouter&gt;
```
</code></pre> <h3 id="分析插件"><a href="#分析插件" aria-hidden="true" class="header-anchor">#</a> 分析插件</h3> <pre><code>- webpack-bundle-analyzer
- webpack --profile --json 记录构件耗时并输出json文件
- [Webpack Analyse](http://webpack.github.io/analyse/)官方可视化工具
</code></pre> <h3 id="hrm-模块热替换"><a href="#hrm-模块热替换" aria-hidden="true" class="header-anchor">#</a> HRM 模块热替换</h3> <div class="language- extra-class"><pre class="language-text"><code>   new webpack.HotModuleReplacementPlugin(), //当启动时带上 `--hot` 参数会自动调用
   new webpack.NamedModulesPlugin(), // HMR shows correct file names in console on update.
</code></pre></div><h3 id="接入serviceworker-workbox-webpack-plugin"><a href="#接入serviceworker-workbox-webpack-plugin" aria-hidden="true" class="header-anchor">#</a> 接入serviceWorker workbox-webpack-plugin</h3> <pre><code>- wokbox 是用于向web应用程序添加离线支持的JavaScript库。
- https://segmentfault.com/a/1190000019281388?utm_source=tag-newest
</code></pre> <h2 id="gpu加速原理"><a href="#gpu加速原理" aria-hidden="true" class="header-anchor">#</a> GPU加速原理</h2> <h3 id="网页的渲染过程"><a href="#网页的渲染过程" aria-hidden="true" class="header-anchor">#</a> 网页的渲染过程</h3> <pre><code>1. 获取dom 分割成多个层
2. 对每个图层的节点计算样式结果 （Recalculate style）
3. 为每个节点生成图形和位置 layout 
4. 将每个节点绘制并填充到图形的位置中 paint 
5. 图层作为纹理上传到GPU
6. 符合条件的多图层生成屏幕的图像  Composite layer 合成层
7.浏览器渲染过程 layout -&gt; paint -&gt; composite layer （触发的阶段越高，代价越高）

独立的层 --&gt;重排重绘 不会影响父层
</code></pre> <h3 id="哪些些会生成独立的层"><a href="#哪些些会生成独立的层" aria-hidden="true" class="header-anchor">#</a> 哪些些会生成独立的层</h3> <pre><code>1. 根元素 position transform 半透明 canvas video overflow 滤镜...
</code></pre> <h3 id="哪些属性可以开启gpu加速"><a href="#哪些属性可以开启gpu加速" aria-hidden="true" class="header-anchor">#</a> 哪些属性可以开启GPU加速</h3> <pre><code> - 虽然生成独立的层，但是还是cpu一直在计算重绘重排，再传到GPU 进行合成
- 开启GPU加速后 就省去CPU重排重绘的过程 GPU(图形处理器)擅长图形处理   (gpu.js)
- css3d video webgl transfrom css滤镜 flash z-index大于某个相邻节点的layer元素... 
</code></pre> <h3 id="硬件加速（gpu加速）"><a href="#硬件加速（gpu加速）" aria-hidden="true" class="header-anchor">#</a> 硬件加速（GPU加速）</h3> <pre><code>- 术语：Texture 即CPU传到GPU的一个Bitmap
- GPU 能对 快速对Texture 进行 偏移 旋转，缩放，修改透明度等
- 节约了 
    1. CPU进行layout paint 的时间 
    2. CPU上传位图的时间
</code></pre> <h3 id="cpu-vs-gpu"><a href="#cpu-vs-gpu" aria-hidden="true" class="header-anchor">#</a> CPU VS GPU</h3> <pre><code>- 相同：都有总线与外界联系，有自己的缓存体系，以及数字与逻辑运算单元，两者都是为了完成计算任务而设计的
- 不同：CPU 主要处理操作系统和应用程序 GPU主要处理跟显示相关的数据处理， GPU的活一般CPU都能干，但是效率低
</code></pre> <h3 id="layer模型"><a href="#layer模型" aria-hidden="true" class="header-anchor">#</a> layer模型</h3> <pre><code>- 浏览器根据css属性生成layer
- 将layer作为Texture上传GPU
- 当改变layer的transfrom opacity 等属性，渲染会跳过 layout paint 直接通知GPU做出改变
</code></pre> <h2 id="重绘"><a href="#重绘" aria-hidden="true" class="header-anchor">#</a> 重绘</h2> <pre><code>- border-raduis box-shadow color ...
</code></pre> <h2 id="重排"><a href="#重排" aria-hidden="true" class="header-anchor">#</a> 重排</h2> <pre><code>- 跳过优化（浏览器对重排有一定的优化，合并多次重排）读取 offsetTop scrollTop width clientWidth getComputedStyle() getBoundingClientRect()
- 删除位置 大小 盒子
- 读写分离   **fastdom.js**

```
var h = document.getElementById('h').clientHeight
//写操作放到下一帧 （假如下一针有大量的操作，requestAnimationFrame会自动调整帧数从60FPS降到30FPS，不会导致丢帧）
    requestAnimationFrame(function(){
        xxx.style.height = h*2
    })
```
- display:none -&gt; block 重绘重排  visibility:visible -&gt; hidden 
</code></pre> <p>##. 直出
- 假如多页的话，每次跳转都会重新加载你以来的vue react
- 假如SPA单页面：访问html文件 -&gt; 初始化路由 -&gt; 找到对应跟路由 -&gt; 找到对应组件 -&gt;发请求 发给后端再渲染   导致<strong>白屏</strong>
- <strong>SSR + SPA</strong> 用户访问到网站直接吐html
- 多页转单页 <strong>pushstate技术</strong> a/b -&gt;c/d 检测到路由变化向后台发请求
- 如果header是ajax （&quot;X-Requested-With&quot;:&quot;XMLHttpRequest&quot;）就是单页，不是render</p> <ol start="13"><li>利用缓存技术(localStorage indexedDB webSQL等)
<ol><li>缓存关键路径里的js资源。（微信）
第一次访问时将js放到缓存中，每次进来取出来执行</li></ol> <ul><li>关键点是设计一套缓存更新机制。对缓存的js增加后缀(时间戳或hash等)来设置独一无二的版本标识。</li> <li>每次后端同步传一份资源的配置文件，FE根据配置文件和缓存中的文件进行版本标识。从而决定是利用缓存还是重新请求。</li></ul> <ol start="2"><li>利用缓存对关键的XHR异步请求进行缓存。（天猫超市）</li></ol> <ul><li>天猫超时首页对首屏中的轮播和10个分类入口的数据进行了缓存。提升首屏的渲染展示时间。</li></ul> <ol start="3"><li>对非关键请求进行缓存(狗东pc)</li></ol> <ul><li>将非首屏资源的HTML/CSS等资源抽出来放在LS内，当页面滚动到可视区域时再去LS中获取数据，插入到dom中。
<img src="/img/wx_cache.png" alt="wx"></li></ul></li></ol> <div class="language- extra-class"><pre class="language-text"><code>wx
window.__moon_map = {&quot;pages/iframe_communicate.js&quot;:&quot;//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/pages/iframe_communicate42f400.js&quot;,&quot;new_video/player.html.js&quot;:&quot;//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/new_video/player.html433882.js&quot;,}

58.com 下localstorage
clv
{j1.58cdn.com.cn/componentsLoader/dist/PopCollection.js: &quot;20180427170320&quot;
j1.58cdn.com.cn/componentsLoader/dist/PopupBind.js: &quot;20181221193411&quot;
j1.58cdn.com.cn/componentsLoader/dist/PopupLogin.js: &quot;20181221193411&quot;
j1.58cdn.com.cn/git/passport-popupwarn/BindBefore.js: &quot;20181201104527&quot;
j1.58cdn.com.cn/git/passport-popupwarn/MobileSure.js: &quot;20181201104527&quot;
j1.58cdn.com.cn/git/passport-popupwarn/Warn.js: &quot;20181201104527&quot;
j1.58cdn.com.cn/git/private-phone-call-pc/dist/js/bundle_pc_generate.js: &quot;0&quot;
updateTime: 1555060912448//现在的时间戳
}
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>请打开chrome工具对比 preference timeingline</p></div> <div class="language- extra-class"><pre class="language-text"><code>对比 preference timeingline
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
	&lt;meta charset=&quot;UTF-8&quot;&gt;
	&lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;
&lt;style&gt;
	.container {
		position: relative;
	}
	#ball,#ball2 {
		position: absolute;
		border-radius: 50%;
		box-shadow: 0 0 5px 0 red;
		width: 100px;
		height: 100px;
	}
	#ball2 {
		box-shadow: 0 0 5px 0 gray;
	}
	.run {
		animation: running-circle 3s infinite;
	}
	.run2 {
		animation: running-circle2 3s infinite;
	}
	@keyframes running-circle {
		0% {
			top: 0;
			left: 0;
		}
		25% {
			top: 0px;
			left: 200px;
		}
		50% {
			top: 200px;
			left: 200px;
		}
		75% {
			top: 200px;
			left: 0px;
		}
		100% {
			top: 0px;
			left: 0px;
		}
	}
	@keyframes running-circle2 {
		0% {
			transform: translate(0,0)
		}
		25% {
			transform: translate(0,200px)
		}
		50% {
			transform: translate(200px,200px)
		}
		75% {
			transform: translate(200px,0)
		}
		100% {
			transform: translate(0,0)

		}
	}
&lt;/style&gt;
&lt;body&gt;
	&lt;div class=&quot;container&quot;&gt;
		&lt;div id=&quot;ball&quot;&gt;&lt;/div&gt;
		&lt;div id=&quot;ball2&quot;&gt;&lt;/div&gt;
	&lt;/div&gt;
	&lt;script&gt;
		let ball = document.getElementById('ball')
		ball.classList.add('run')
		let ball2 = document.getElementById('ball2')
		ball2.classList.add('run2')
	&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>ball分析</p></div> <p><img src="/img/ball.gif" alt="ball"></p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>ball2分析</p></div> <p><img src="/img/ball2.gif" alt="ball"></p> <p><a href="https://www.smashingmagazine.com/2018/01/front-end-performance-checklist-2018-pdf-pages/" target="_blank" rel="noopener noreferrer">前端性能优化清单<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://cherryblog.site/front-end-performance-checklist-2018.html" target="_blank" rel="noopener noreferrer">前端性能优化清单<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://zhuanlan.zhihu.com/p/30558018" target="_blank" rel="noopener noreferrer">从Chrome源码看浏览器如何加载资源<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/501981732/my-vuepress/edit/master/FE/性能优化.md" target="_blank" rel="noopener noreferrer">改善此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">10/24/2019, 4:46:49 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/47.7e5929fe.js" defer></script><script src="/assets/js/app.2e26f941.js" defer></script>
  </body>
</html>
